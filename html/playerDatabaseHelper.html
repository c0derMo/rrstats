<!DOCTYPE html>
<html>
    <head>
        <title>F7SC Player Stats - Player Database Helper</title>
    </head>
    <body>
        <div>
            <button id="import">Import</button><button id="export">Export</button><br>
            <textarea id="io"></textarea>
            <br><br><br><br>
            <table>
                <tbody id="tb">

                </tbody>
            </table>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script>
            let playerDB = {}
            let rows = [];

            $('#import').on("click", () => {
                playerDB = JSON.parse($('#io').val());
                updateTable();
            });

            $('#export').on('click', () => {
                updatePlayerDB();
                $('#io').val(JSON.stringify(playerDB));
            });

            function updateTable() {
                rows = [];
                Object.keys(playerDB).forEach(e => {
                    if(playerDB[e].discordId === "") {
                        rows.push(e);
                        let row = $('<tr></tr>');
                        row.append($('<td>' + e + '</td>'));
                        row.append($('<td><input type="text" id="dID_' + e.replace(" ", "") + '""></td>'));
                        $('#tb').append(row);
                    }
                });
            }

            function updatePlayerDB() {
                rows.forEach(e => {
                    playerDB[e].discordId = $('#dID_' + e.replace(" ", "")).val()
                });
            }
        </script>
    </body>
</html>